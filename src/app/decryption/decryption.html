<div class="main-content" style="max-width: 800px;">
    <div class="secure-header">
        <div class="brand-section">
            <div class="shield-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="#0ea5e9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    <path d="M9 12l2 2 4-4"></path>
                </svg>
            </div>
            <div>
                <h2 style="margin:0; font-size:1.2rem;">SecureDecrypt</h2>
                <span style="font-size:0.7rem; color:#64748b; letter-spacing:1px;">ENTERPRISE EDITION</span>
            </div>
        </div>
        <div class="system-status">
            <span class="status-dot"></span>
            SYSTEM SECURE
        </div>
    </div>

    <div class="console-card">
        <div class="console-header">
            <div style="display:flex; align-items:center; gap:10px;">
                <h1 style="margin:0; font-size:1.5rem; text-transform: uppercase; letter-spacing: 0.5px;">Decryption
                    Console</h1>
                <span class="version-badge">v2.0</span>
            </div>
            <p style="margin: 5px 0 0 0; color: #64748b; font-size: 0.9rem;">Secure Environment Active. Awaiting
                Credentials.</p>
        </div>

        <div class="console-body">

            <app-input label="SECURITY CLEARANCE ID" placeholder="Enter ID" [ngModel]="securityId()"
                (ngModelChange)="securityId.set($event);">
            </app-input>
            <div class="format-hint"
                style="text-align: right; margin-top: -0.75rem; margin-bottom: 1.5rem; font-size: 0.75rem; color: #475569; position: relative; z-index: 1;">
                Format: XXXX-XXXX-XXXX-XXXX</div>

            <app-input label="16-DIGIT UNIQUE KEY" type="password" placeholder="Enter 16-digit unique key..."
                [ngModel]="decryptionKey()" (ngModelChange)="decryptionKey.set($event)" [hasIcon]="true">
                <svg icon xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4">
                    </path>
                </svg>
            </app-input>


            <div class="form-group">
                <label>DECRYPTION ALGORITHM</label>
                <div class="input-wrapper">
                    <select [ngModel]="algorithm()" (ngModelChange)="algorithm.set($event)">
                        <option *ngFor="let algo of algorithms" [value]="algo">{{ algo }} {{ algo === 'AES-256-GCM' ?
                            '(Recommended)' : '' }}</option>
                    </select>
                </div>
            </div>

            <app-input *ngIf="algorithm() === 'NewAlgo'" label="Custom Algorithm Name" placeholder="e.g. RSA-2048"
                [ngModel]="customAlgorithm()" (ngModelChange)="customAlgorithm.set($event)" [hasIcon]="true">
                <svg icon xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
            </app-input>

            <div class="form-group">
                <div class="label-row">
                    <label>ENCRYPTED PAYLOAD</label>
                    <span *ngIf="isLoadingPayload()"
                        style="color: #0ea5e9; font-size: 0.75rem; display: flex; align-items: center; gap: 5px; margin-left: auto;">
                        <span class="spinner" style="width: 12px; height: 12px; border-width: 1px;"></span>
                        FETCHING DATA...
                    </span>
                    <a *ngIf="!isLoadingPayload() && encryptedPayload()" (click)="copyPayload()" class="action-link"
                        style="margin-left: auto;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        COPY PAYLOAD
                    </a>
                </div>
                <div class="textarea-wrapper">
                    <span class="bracket-icon">{{ '{' }} {{ '}' }}</span>

                    <div *ngIf="photoUrl()" class="photo-container"
                        style="display: flex; justify-content: center; padding: 1rem;">
                        <img [src]="photoUrl()" alt="Decrypted Content"
                            style="max-width: 100%; max-height: 300px; border-radius: 4px; border: 1px solid #334155;">
                    </div>

                    <textarea *ngIf="!photoUrl()" [value]="encryptedPayload()" readonly
                        [placeholder]="isLoadingPayload() ? 'Accessing Secure Database...' : 'Payload will automatically load when valid credentials are provided...'"
                        style="cursor: default; opacity: 0.9; border-color: #334155;"></textarea>
                </div>
            </div>

            <app-button variant="primary" (click)="initiateDecryption(); onCredentialsChange()"
                [loading]="isDecrypting()" [disabled]="isDecrypting()">
                <svg *ngIf="!isDecrypting()" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                    stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                {{ isDecrypting() ? 'DECRYPTING...' : 'INITIATE DECRYPTION' }}
            </app-button>
        </div>

        <div class="console-footer">
            <div class="footer-item">
                <span class="indicator"></span> AES-256 GCM
            </div>
            <div class="footer-item">
                <span class="indicator-time"></span> 12ms Latency
            </div>
            <div class="footer-item ml-auto">
                SESSION ID: <span style="font-family:monospace">8F3A-9C2B-1E4D</span>
            </div>
        </div>
    </div>

    <!-- Shared Toast Notification -->
    <app-toast [show]="showToast()" [message]="toastMessage()" [type]="toastType()"></app-toast>
</div>
<style>
    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }
</style>